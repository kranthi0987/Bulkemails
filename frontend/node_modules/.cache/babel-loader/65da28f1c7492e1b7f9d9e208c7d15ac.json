{"ast":null,"code":"var _jsxFileName = \"C:\\\\Workspace\\\\pycharmprojects\\\\Bulkemails\\\\frontend\\\\src\\\\views\\\\Base\\\\BulkMessages\\\\BulkMessages.js\";\nimport React, { Component } from 'react';\nimport { Button, Card, CardBody, CardFooter, CardHeader, Col, Form, FormGroup, Input, Label, Row } from 'reactstrap';\nimport toaster from \"toasted-notes\";\nimport \"toasted-notes/src/styles.css\";\nimport { BASEURL } from '../../../Constants';\nimport EmailEditor from 'react-email-editor';\nimport { ReactMultiEmail } from \"react-multi-email\";\nimport \"react-multi-email/style.css\";\nconst styles = {\n  fontFamily: \"sans-serif\",\n  width: \"500px\",\n  border: \"1px solid #eee\",\n  background: \"#f3f3f3\",\n  padding: \"25px\",\n  margin: \"20px\"\n};\n\nclass BulkMessages extends Component {\n  constructor(props) {\n    super(props);\n\n    this.exportHtml = () => {\n      this.editor.exportHtml(data => {\n        const {\n          design,\n          html\n        } = data;\n        console.log('exportHtml', html);\n      });\n    };\n\n    this.toggle = this.toggle.bind(this);\n    this.toggleFade = this.toggleFade.bind(this);\n    this.state = {\n      collapse: true,\n      fadeIn: true,\n      timeout: 300\n    };\n    this.state = {\n      from_who: localStorage.getItem('email'),\n      to_who: '',\n      message_status: '',\n      message: '',\n      submitted: false,\n      loading: false,\n      error: '',\n      vcardfile: '',\n      buttonState: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.clearForm = this.clearForm.bind(this);\n  }\n\n  toggle() {\n    this.setState({\n      collapse: !this.state.collapse\n    });\n  }\n\n  toggleFade() {\n    this.setState(prevState => {\n      return {\n        fadeIn: !prevState\n      };\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.setState({\n      buttonState: 'loading'\n    });\n    this.setState({\n      submitted: true\n    });\n    const {\n      to_who,\n      message_status,\n      message\n    } = this.state; // this.exportHtml();\n    // stop here if form is invalid\n    // if (!(message)) {\n    //     return;\n    // }\n\n    console.log(to_who, message);\n    this.setState({\n      loading: true\n    });\n    let url = BASEURL + 'api/mail/';\n    const inputFiles = document.querySelectorAll('input[type=\"file\"]');\n    let formData = new FormData();\n    let formData1 = new FormData(); // for (const file of inputFiles) {\n    //     formData.append('vcardfile', file.files[0]);\n    // }\n    // {\n    //                 \"mails\": {\n    //                     \"from_email\": \"icon@icon-rim.com\",\n    //                     \"to_email\": \"to@icon-rim.com\",\n    //                     \"subject\": \"marketing\",\n    //                     \"message\": \"dsddasdasd\",\n    //                     \"mailcontent\": \"hiiii\"\n    //                 }\n    //             }\n\n    formData.append('mails', formData1);\n    formData1.append('from_email', 'icon@icon-rim.com');\n    formData1.append('to_email', 'to@icon-rim.com');\n    formData1.append('subject', 'marketing');\n    formData1.append('message', 'dsddasdasd');\n    formData1.append('mailcontent', 'dsdasdsa'); // formData.append('sent_status', 'true');\n    // // formData.append('vcardfile',inputFiles);\n\n    fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Authorization\": 'Bearer ' + localStorage.getItem('token')\n      },\n      body: formData\n    }).then(response => {\n      if (response.status === 200) {\n        console.log(response);\n        toaster.notify(\"Sucessfull message sent\", {\n          duration: 2000,\n          type: \"success\"\n        });\n        this.clearForm();\n        return response.json();\n      } else {\n        console.log(\"oh no!\", response.status === 404);\n      }\n    }).then(function (data) {\n      console.log('request succeeded with JSON response', data);\n    });\n  } // Call this function to reset input\n\n\n  clearForm() {\n    this.setState({\n      message: '',\n      to_who: '',\n      vcardfile: '',\n      submitted: false\n    });\n  }\n\n  handleChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  render() {\n    const {\n      from_who,\n      to_who,\n      message_status,\n      submitted,\n      message,\n      vcardfile,\n      emails\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"animated fadeIn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: \"12\",\n      md: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(CardHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 33\n      }\n    }, \"Bulk Message\"), \" Whatsapp\"), /*#__PURE__*/React.createElement(CardBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      action: \"\",\n      method: \"post\",\n      encType: \"multipart/form-data\",\n      className: \"form-horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 45\n      }\n    }, \"From \")), /*#__PURE__*/React.createElement(Col, {\n      xs: \"12\",\n      md: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"form-control-static\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 49\n      }\n    }, localStorage.getItem('email'))))), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 45\n      }\n    }, \"Enter emails\"), /*#__PURE__*/React.createElement(ReactMultiEmail, {\n      placeholder: \"Input your Email Address\",\n      emails: emails,\n      onChange: _emails => {\n        this.setState({\n          emails: _emails\n        });\n      },\n      getLabel: (email, index, removeEmail) => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          \"data-tag\": true,\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 57\n          }\n        }, email, /*#__PURE__*/React.createElement(\"span\", {\n          \"data-tag-handle\": true,\n          onClick: () => removeEmail(index),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 61\n          }\n        }, \"\\xD7\"));\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 45\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 45\n      }\n    }))), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      htmlFor: \"file-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 45\n      }\n    }, \"Vcard \")), /*#__PURE__*/React.createElement(Col, {\n      xs: \"12\",\n      md: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"file\",\n      id: \"file-input\",\n      accept: \".csv\",\n      name: \"vcardfile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 45\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      xs: \"12\",\n      md: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: BASEURL + 'media/samplecsv/excel.csv',\n      download: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 45\n      }\n    }, \"Click to download samplecsv\"))), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      htmlFor: \"textarea-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 45\n      }\n    }, \"Design Your Own Message\")), /*#__PURE__*/React.createElement(Col, {\n      xs: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(EmailEditor, {\n      ref: editor => this.editor = editor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 45\n      }\n    }))))), /*#__PURE__*/React.createElement(CardFooter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      size: \"sm\",\n      color: \"primary\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-dot-circle-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 109\n      }\n    }), \" Submit\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"reset\",\n      size: \"sm\",\n      color: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-ban\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 79\n      }\n    }), \" Reset\"))))));\n  }\n\n}\n\nexport default BulkMessages;","map":{"version":3,"sources":["C:/Workspace/pycharmprojects/Bulkemails/frontend/src/views/Base/BulkMessages/BulkMessages.js"],"names":["React","Component","Button","Card","CardBody","CardFooter","CardHeader","Col","Form","FormGroup","Input","Label","Row","toaster","BASEURL","EmailEditor","ReactMultiEmail","styles","fontFamily","width","border","background","padding","margin","BulkMessages","constructor","props","exportHtml","editor","data","design","html","console","log","toggle","bind","toggleFade","state","collapse","fadeIn","timeout","from_who","localStorage","getItem","to_who","message_status","message","submitted","loading","error","vcardfile","buttonState","handleChange","handleSubmit","clearForm","setState","prevState","e","preventDefault","url","inputFiles","document","querySelectorAll","formData","FormData","formData1","append","fetch","method","headers","body","then","response","status","notify","duration","type","json","name","value","target","render","emails","_emails","email","index","removeEmail"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Button, Card, CardBody, CardFooter, CardHeader, Col, Form, FormGroup, Input, Label, Row,} from 'reactstrap';\r\nimport toaster from \"toasted-notes\";\r\nimport \"toasted-notes/src/styles.css\";\r\nimport {BASEURL} from '../../../Constants'\r\nimport EmailEditor from 'react-email-editor'\r\nimport {ReactMultiEmail} from \"react-multi-email\";\r\nimport \"react-multi-email/style.css\";\r\n\r\nconst styles = {\r\n    fontFamily: \"sans-serif\",\r\n    width: \"500px\",\r\n    border: \"1px solid #eee\",\r\n    background: \"#f3f3f3\",\r\n    padding: \"25px\",\r\n    margin: \"20px\"\r\n};\r\n\r\n\r\nclass BulkMessages extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.toggle = this.toggle.bind(this);\r\n        this.toggleFade = this.toggleFade.bind(this);\r\n        this.state = {\r\n            collapse: true,\r\n            fadeIn: true,\r\n            timeout: 300\r\n        };\r\n        this.state = {\r\n            from_who: localStorage.getItem('email'),\r\n            to_who: '',\r\n            message_status: '',\r\n            message: '',\r\n            submitted: false,\r\n            loading: false,\r\n            error: '',\r\n            vcardfile: '',\r\n            buttonState: ''\r\n        };\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.clearForm = this.clearForm.bind(this);\r\n    }\r\n\r\n    toggle() {\r\n        this.setState({collapse: !this.state.collapse});\r\n    }\r\n\r\n    toggleFade() {\r\n        this.setState((prevState) => {\r\n            return {fadeIn: !prevState}\r\n        });\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        this.setState({buttonState: 'loading'});\r\n        this.setState({submitted: true});\r\n        const {to_who, message_status, message} = this.state;\r\n        // this.exportHtml();\r\n        // stop here if form is invalid\r\n        // if (!(message)) {\r\n        //     return;\r\n        // }\r\n        console.log(to_who, message);\r\n\r\n        this.setState({loading: true});\r\n\r\n        let url = BASEURL + 'api/mail/';\r\n\r\n        const inputFiles = document.querySelectorAll('input[type=\"file\"]');\r\n\r\n\r\n        let formData = new FormData();\r\n        let formData1 = new FormData();\r\n        // for (const file of inputFiles) {\r\n        //     formData.append('vcardfile', file.files[0]);\r\n        // }\r\n\r\n// {\r\n//                 \"mails\": {\r\n//                     \"from_email\": \"icon@icon-rim.com\",\r\n//                     \"to_email\": \"to@icon-rim.com\",\r\n//                     \"subject\": \"marketing\",\r\n//                     \"message\": \"dsddasdasd\",\r\n//                     \"mailcontent\": \"hiiii\"\r\n//                 }\r\n//             }\r\n\r\n\r\n        formData.append('mails', formData1);\r\n        formData1.append('from_email', 'icon@icon-rim.com');\r\n        formData1.append('to_email', 'to@icon-rim.com');\r\n        formData1.append('subject', 'marketing');\r\n        formData1.append('message', 'dsddasdasd');\r\n        formData1.append('mailcontent', 'dsdasdsa');\r\n\r\n        // formData.append('sent_status', 'true');\r\n        // // formData.append('vcardfile',inputFiles);\r\n\r\n        fetch(url, {\r\n            method: \"POST\",\r\n            headers: ({\r\n                \"Accept\": \"application/json\",\r\n                \"Authorization\": 'Bearer ' + localStorage.getItem('token'),\r\n            }),\r\n            body: formData\r\n        }).then(response => {\r\n            if (response.status === 200) {\r\n                console.log(response);\r\n                toaster.notify(\"Sucessfull message sent\", {\r\n                    duration: 2000, type: \"success\"\r\n                });\r\n                this.clearForm();\r\n\r\n                return response.json()\r\n            } else {\r\n                console.log(\"oh no!\", response.status === 404)\r\n            }\r\n        }).then(function (data) {\r\n            console.log('request succeeded with JSON response', data)\r\n        })\r\n    }\r\n\r\n// Call this function to reset input\r\n    clearForm() {\r\n        this.setState({\r\n            message: '',\r\n            to_who: '',\r\n            vcardfile: '',\r\n            submitted: false\r\n        })\r\n    }\r\n\r\n    exportHtml = () => {\r\n        this.editor.exportHtml(data => {\r\n            const {design, html} = data;\r\n            console.log('exportHtml', html)\r\n        })\r\n    };\r\n\r\n    handleChange(e) {\r\n        const {name, value} = e.target;\r\n        this.setState({[name]: value});\r\n    }\r\n\r\n    render() {\r\n        const {from_who, to_who, message_status, submitted, message, vcardfile, emails} = this.state;\r\n        return (\r\n            <div className=\"animated fadeIn\">\r\n                <Row>\r\n                    <Col xs=\"12\" md=\"12\">\r\n                        <Card>\r\n                            <CardHeader>\r\n                                <strong>Bulk Message</strong> Whatsapp\r\n                            </CardHeader>\r\n                            <CardBody>\r\n                                <Form action=\"\" method=\"post\" encType=\"multipart/form-data\" className=\"form-horizontal\">\r\n                                    <FormGroup row>\r\n                                        <Col md=\"3\">\r\n                                            <Label>From </Label>\r\n                                        </Col>\r\n                                        <Col xs=\"12\" md=\"9\">\r\n                                            <p className=\"form-control-static\">\r\n                                                <strong>{localStorage.getItem('email')}</strong></p>\r\n                                        </Col>\r\n                                    </FormGroup>\r\n                                    <FormGroup row>\r\n                                        <div style={styles}>\r\n                                            <h3>Enter emails</h3>\r\n                                            <ReactMultiEmail\r\n                                                placeholder=\"Input your Email Address\"\r\n                                                emails={emails}\r\n                                                onChange={(_emails: string[]) => {\r\n                                                    this.setState({emails: _emails});\r\n                                                }}\r\n                                                getLabel={(\r\n                                                    email: string,\r\n                                                    index: number,\r\n                                                    removeEmail: (index: number) => void\r\n                                                ) => {\r\n                                                    return (\r\n                                                        <div data-tag key={index}>\r\n                                                            {email}\r\n                                                            <span data-tag-handle\r\n                                                                  onClick={() => removeEmail(index)}>Ã—</span>\r\n                                                        </div>\r\n                                                    );\r\n                                                }}\r\n                                            />\r\n                                            <br/>\r\n                                            {/*<h4>react-multi-email value</h4>*/}\r\n                                            {/*<p>{emails.join(\", \") || \"empty\"}</p>*/}\r\n                                        </div>\r\n                                    </FormGroup>\r\n                                    <FormGroup row>\r\n                                        <Col md=\"3\">\r\n                                            <Label htmlFor=\"file-input\">Vcard </Label>\r\n                                        </Col>\r\n                                        <Col xs=\"12\" md=\"9\">\r\n                                            <Input type=\"file\" id=\"file-input\" accept=\".csv\"\r\n                                                   name=\"vcardfile\"/>\r\n                                        </Col>\r\n                                        <Col xs=\"12\" md=\"9\">\r\n                                            <a href={BASEURL + 'media/samplecsv/excel.csv'} download>Click to download\r\n                                                samplecsv</a>\r\n                                        </Col>\r\n                                    </FormGroup>\r\n                                    <FormGroup row>\r\n                                        <Col md=\"3\">\r\n                                            <Label htmlFor=\"textarea-input\">Design Your Own Message</Label>\r\n                                        </Col>\r\n                                        <Col xs=\"12\">\r\n                                            <EmailEditor\r\n                                                ref={editor => this.editor = editor}\r\n                                            />\r\n                                        </Col>\r\n                                    </FormGroup>\r\n\r\n                                </Form>\r\n                            </CardBody>\r\n                            <CardFooter>\r\n                                <Button type=\"submit\" size=\"sm\" color=\"primary\" onClick={this.handleSubmit}><i\r\n                                    className=\"fa fa-dot-circle-o\"></i> Submit</Button>\r\n                                <Button type=\"reset\" size=\"sm\" color=\"danger\"><i\r\n                                    className=\"fa fa-ban\"></i> Reset</Button>\r\n                            </CardFooter>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default BulkMessages;\r\n"]},"metadata":{},"sourceType":"module"}