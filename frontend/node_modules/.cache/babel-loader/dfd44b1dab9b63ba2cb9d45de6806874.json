{"ast":null,"code":"var _jsxFileName = \"C:\\\\Workspace\\\\pycharmprojects\\\\Bulkemails\\\\frontend\\\\src\\\\views\\\\Base\\\\Messages\\\\Messages.js\";\nimport React, { Component } from 'react';\nimport { Badge, Button, Card, CardBody, CardFooter, CardHeader, Col, Collapse, DropdownItem, DropdownMenu, DropdownToggle, Fade, Form, FormGroup, FormText, FormFeedback, Input, InputGroup, InputGroupAddon, InputGroupButtonDropdown, InputGroupText, Label, Row } from 'reactstrap'; // Import React FilePond\n\nimport { FilePond, registerPlugin } from 'react-filepond'; // Import FilePond styles\n\nimport 'filepond/dist/filepond.min.css'; // Import the Image EXIF Orientation and Image Preview plugins\n// Note: These need to be installed separately\n\nimport FilePondPluginImageExifOrientation from 'filepond-plugin-image-exif-orientation';\nimport FilePondPluginImagePreview from 'filepond-plugin-image-preview';\nimport 'filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css';\nimport toaster from \"toasted-notes\";\nimport \"toasted-notes/src/styles.css\";\nimport { BASEURL } from \"../../../Constants\";\nregisterPlugin(FilePondPluginImagePreview, FilePondPluginImageExifOrientation);\n\nclass Messages extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collapse: true,\n      fadeIn: true,\n      timeout: 30\n    };\n    this.state = {\n      from_who: localStorage.getItem('phone'),\n      to_who: '',\n      message_status: '',\n      message: '',\n      submitted: false,\n      loading: false,\n      error: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.clearForm = this.clearForm.bind(this);\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.setState({\n      submitted: true\n    });\n    const {\n      from_who = ['9989015918'],\n      to_who,\n      message_status,\n      message\n    } = this.state; // stop here if form is invalid\n\n    if (!(to_who && message)) {\n      return;\n    }\n\n    console.log(to_who, message);\n    this.setState({\n      loading: true\n    });\n    let url = BASEURL + 'message/singlemessage/';\n    let formData = new FormData();\n    formData.append('from_who', localStorage.getItem('phone'));\n    formData.append('phone', '91' + to_who);\n    formData.append('body', message);\n    formData.append('sent_status', 'true');\n    fetch(url, {\n      method: \"POST\",\n      headers: {},\n      body: formData\n    }).then(response => {\n      if (response.status === 200) {\n        console.log(response);\n        toaster.notify(\"Sucessfull message sent\", {\n          duration: 2000,\n          type: \"success\"\n        });\n        this.clearForm();\n        return response.json();\n      } else {\n        console.log(\"oh no!\", response.status === 404);\n      }\n    }).then(function (data) {\n      console.log('request succeeded with JSON response', data);\n    });\n  }\n\n  clearForm() {\n    this.setState({\n      submitted: false\n    });\n    this.setState({\n      to_who: '',\n      message: ''\n    }); // <= here\n  }\n\n  handleChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  render() {\n    const {\n      from_who,\n      to_who,\n      message_status,\n      submitted,\n      message\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"animated fadeIn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: \"12\",\n      md: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(CardHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 33\n      }\n    }, \"Single Message\"), \" Whatsapp\"), /*#__PURE__*/React.createElement(CardBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      action: \"\",\n      method: \"post\",\n      encType: \"multipart/form-data\",\n      className: \"form-horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 45\n      }\n    }, \"From \")), /*#__PURE__*/React.createElement(Col, {\n      xs: \"12\",\n      md: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"form-control-static\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 80\n      }\n    }, localStorage.getItem('phone'))))), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      htmlFor: \"text-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 45\n      }\n    }, \"Mobile Number\")), /*#__PURE__*/React.createElement(Col, {\n      xs: \"12\",\n      md: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      id: \"text-input\",\n      name: \"to_who\",\n      value: to_who,\n      onChange: this.handleChange,\n      placeholder: \"Mobile number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 45\n      }\n    }), submitted && !to_who && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"help-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 45\n      }\n    }, \"Mobilenumber is required\"), /*#__PURE__*/React.createElement(FormText, {\n      color: \"muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 45\n      }\n    }, \"Enter Mobile Number with Country Code\"))), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      htmlFor: \"textarea-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 45\n      }\n    }, \"Message\")), /*#__PURE__*/React.createElement(Col, {\n      xs: \"12\",\n      md: \"9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"textarea\",\n      name: \"message\",\n      id: \"textarea-input\",\n      rows: \"9\",\n      value: message,\n      onChange: this.handleChange,\n      placeholder: \"Message Content...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 45\n      }\n    }), submitted && !message && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"help-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 45\n      }\n    }, \"message is required\"))))), /*#__PURE__*/React.createElement(CardFooter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      size: \"sm\",\n      color: \"primary\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-dot-circle-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 109\n      }\n    }), \" Submit\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"reset\",\n      size: \"sm\",\n      color: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-ban\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 79\n      }\n    }), \" Reset\"))))));\n  }\n\n}\n\nexport default Messages;","map":{"version":3,"sources":["C:/Workspace/pycharmprojects/Bulkemails/frontend/src/views/Base/Messages/Messages.js"],"names":["React","Component","Badge","Button","Card","CardBody","CardFooter","CardHeader","Col","Collapse","DropdownItem","DropdownMenu","DropdownToggle","Fade","Form","FormGroup","FormText","FormFeedback","Input","InputGroup","InputGroupAddon","InputGroupButtonDropdown","InputGroupText","Label","Row","FilePond","registerPlugin","FilePondPluginImageExifOrientation","FilePondPluginImagePreview","toaster","BASEURL","Messages","constructor","props","state","collapse","fadeIn","timeout","from_who","localStorage","getItem","to_who","message_status","message","submitted","loading","error","handleChange","bind","handleSubmit","clearForm","e","preventDefault","setState","console","log","url","formData","FormData","append","fetch","method","headers","body","then","response","status","notify","duration","type","json","data","name","value","target","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {\r\n    Badge,\r\n    Button,\r\n    Card,\r\n    CardBody,\r\n    CardFooter,\r\n    CardHeader,\r\n    Col,\r\n    Collapse,\r\n    DropdownItem,\r\n    DropdownMenu,\r\n    DropdownToggle,\r\n    Fade,\r\n    Form,\r\n    FormGroup,\r\n    FormText,\r\n    FormFeedback,\r\n    Input,\r\n    InputGroup,\r\n    InputGroupAddon,\r\n    InputGroupButtonDropdown,\r\n    InputGroupText,\r\n    Label,\r\n    Row,\r\n} from 'reactstrap';\r\n// Import React FilePond\r\nimport {FilePond, registerPlugin} from 'react-filepond';\r\n\r\n// Import FilePond styles\r\nimport 'filepond/dist/filepond.min.css';\r\n// Import the Image EXIF Orientation and Image Preview plugins\r\n// Note: These need to be installed separately\r\nimport FilePondPluginImageExifOrientation from 'filepond-plugin-image-exif-orientation';\r\nimport FilePondPluginImagePreview from 'filepond-plugin-image-preview';\r\nimport 'filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css';\r\n\r\nimport toaster from \"toasted-notes\";\r\nimport \"toasted-notes/src/styles.css\";\r\nimport {BASEURL} from \"../../../Constants\";\r\n\r\nregisterPlugin(FilePondPluginImagePreview, FilePondPluginImageExifOrientation);\r\n\r\nclass Messages extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            collapse: true,\r\n            fadeIn: true,\r\n            timeout: 30\r\n        };\r\n        this.state = {\r\n            from_who: localStorage.getItem('phone'),\r\n            to_who: '',\r\n            message_status: '',\r\n            message: '',\r\n            submitted: false,\r\n            loading: false,\r\n            error: ''\r\n        };\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.clearForm = this.clearForm.bind(this);\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({submitted: true});\r\n        const {from_who = ['9989015918'], to_who, message_status, message} = this.state;\r\n\r\n        // stop here if form is invalid\r\n        if (!(to_who && message)) {\r\n            return;\r\n        }\r\n        console.log(to_who, message);\r\n\r\n        this.setState({loading: true});\r\n\r\n        let url = BASEURL+'message/singlemessage/';\r\n\r\n\r\n        let formData = new FormData();\r\n        formData.append('from_who', localStorage.getItem('phone'));\r\n        formData.append('phone', '91'+to_who);\r\n        formData.append('body', message);\r\n        formData.append('sent_status', 'true');\r\n\r\n        fetch(url, {\r\n            method: \"POST\",\r\n            headers: ({}),\r\n            body: formData\r\n        }).then(response => {\r\n            if (response.status === 200) {\r\n                console.log(response);\r\n                toaster.notify(\"Sucessfull message sent\", {\r\n                    duration: 2000, type: \"success\"\r\n                });\r\n                this.clearForm();\r\n                return response.json()\r\n            } else {\r\n                console.log(\"oh no!\", response.status === 404)\r\n            }\r\n        }).then(function (data) {\r\n            console.log('request succeeded with JSON response', data)\r\n        })\r\n\r\n\r\n    }\r\n\r\n    clearForm() {\r\n        this.setState({submitted: false});\r\n        this.setState({to_who: '', message: ''}) // <= here\r\n    }\r\n\r\n    handleChange(e) {\r\n        const {name, value} = e.target;\r\n        this.setState({[name]: value});\r\n    }\r\n\r\n    render() {\r\n        const {from_who, to_who, message_status, submitted, message} = this.state;\r\n        return (\r\n            <div className=\"animated fadeIn\">\r\n                <Row>\r\n                    <Col xs=\"12\" md=\"12\">\r\n                        <Card>\r\n                            <CardHeader>\r\n                                <strong>Single Message</strong> Whatsapp\r\n                            </CardHeader>\r\n                            <CardBody>\r\n                                <Form action=\"\" method=\"post\" encType=\"multipart/form-data\" className=\"form-horizontal\">\r\n                                    <FormGroup row>\r\n                                        <Col md=\"3\">\r\n                                            <Label>From </Label>\r\n                                        </Col>\r\n                                        <Col xs=\"12\" md=\"9\">\r\n                                            <p className=\"form-control-static\"><strong>{localStorage.getItem('phone')}</strong></p>\r\n                                        </Col>\r\n                                    </FormGroup>\r\n                                    <FormGroup row>\r\n                                        <Col md=\"3\">\r\n                                            <Label htmlFor=\"text-input\">Mobile Number</Label>\r\n                                        </Col>\r\n                                        <Col xs=\"12\" md=\"9\">\r\n                                            <Input type=\"text\" id=\"text-input\" name=\"to_who\" value={to_who}\r\n                                                   onChange={this.handleChange}\r\n                                                   placeholder=\"Mobile number\"/>\r\n                                            {submitted && !to_who &&\r\n                                            <div className=\"help-block\">Mobilenumber is required</div>\r\n                                            }\r\n                                            <FormText color=\"muted\">Enter Mobile Number with Country Code</FormText>\r\n                                        </Col>\r\n                                    </FormGroup>\r\n                                    <FormGroup row>\r\n                                        <Col md=\"3\">\r\n                                            <Label htmlFor=\"textarea-input\">Message</Label>\r\n                                        </Col>\r\n                                        <Col xs=\"12\" md=\"9\">\r\n                                            <Input type=\"textarea\" name=\"message\" id=\"textarea-input\" rows=\"9\"\r\n                                                   value={message} onChange={this.handleChange}\r\n                                                   placeholder=\"Message Content...\"/>\r\n                                            {submitted && !message &&\r\n                                            <div className=\"help-block\">message is required</div>\r\n                                            }\r\n                                        </Col>\r\n                                    </FormGroup>\r\n                                </Form>\r\n                            </CardBody>\r\n                            <CardFooter>\r\n                                <Button type=\"submit\" size=\"sm\" color=\"primary\" onClick={this.handleSubmit}><i\r\n                                    className=\"fa fa-dot-circle-o\"></i> Submit</Button>\r\n                                <Button type=\"reset\" size=\"sm\" color=\"danger\"><i\r\n                                    className=\"fa fa-ban\"></i> Reset</Button>\r\n                            </CardFooter>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Messages;\r\n"]},"metadata":{},"sourceType":"module"}